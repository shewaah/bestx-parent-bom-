<%- dbriver = nil -%>
<%- dialect = nil -%>
<%- validation = 'select 1' -%>
<%- db_connection_string = nil -%>
<%
# Attention!!! Ask DevOps Team for the exact hierarchy of the db_brand
# i.e. nexrates db is @env['env_general']['db_brand']
# but nextrade db is @env['env_general']['nexrates']['optional_components']['nextrade']['db_brand']
%>
<%- dbtype = @env['env_general']['db_brand'] -%>
<%- case dbtype
 when /^MsS/ -%>
<%-   dbriver = "net.sourceforge.jtds.jdbc.Driver" -%>
<%-   dialect =  "mssql"-%>
<%-   db_connection_string = "jdbc:jtds:sqlserver:" -%>
<%-   driver_class = "com.microsoft.sqlserver.jdbc.SQLServerDriver" -%>
<%-   validation =  'select 1'-%>
<%- when /^Ora/ -%>
<%-   dbriver = "oracle.jdbc.OracleDriver" -%>
<%-   dialect =  "oracle"-%>
<%-   validation =  'select 1 from dual'-%>
<%-   db_connection_string = "jdbc:oracle:thin:" -%>
<%-   driver_class = "oracle.jdbc.driver.OracleDriver" -%>
<%- when /^My/ -%>
<%-   dbriver = "com.mysql.jdbc.Driver" -%>
<%-   dialect =  "mysql"-%>
<%-   db_connection_string = "jdbc:mysql:" -%>
<%-   driver_class = "com.mysql.jdbc.Driver" -%>
<%- end -%>


#Scheduler configuration
org.quartz.scheduler.instanceName = BestXScheduler
org.quartz.scheduler.skipUpdateCheck = true

#Thread Pool configuration
org.quartz.threadPool.class = it.softsolutions.bestx.QuartzThreadPool
org.quartz.threadPool.threadCount = 32

#Data Source configuration
org.quartz.dataSource.cs_develop.driver = <%= driver_class-%>
org.quartz.dataSource.cs_develop.URL = <%= db_connection_string-%>//<%= @env['env_general']['db_hostname'] %>:<%= @env['env_general']['db_port'] %>;databasename=<%= @env['env_general']['db_database'] %>;SelectMethod=<%= @env['env_general']['db_method'] %>
org.quartz.dataSource.cs_develop.user = <%= @env['env_general']['db_sa_username'] %>
org.quartz.dataSource.cs_develop.password = <%= @env['env_general']['db_sa_password_enc'] %>
org.quartz.dataSource.cs_develop.maxConnections = 35
org.quartz.datasource.cs_develop.validationQuery = <%= validation-%>

#Job Store configuration
org.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreTX
org.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.MSSQLDelegate 
org.quartz.jobStore.tablePrefix = QRTZ_
org.quartz.jobStore.dataSource = <%= @env['env_general']['bestx']['bestxengine']['jobstoredatastore'] %>
org.quartz.jobStore.acquireTriggersWithinLock=true